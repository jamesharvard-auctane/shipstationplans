<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ShipStation Platform and Plan Guide</title>
<style>
  /* ===== ShipStation-leaning Dark Theme + Consistent Spacing ===== */
  :root{
    /* Dark, ship-tech vibe with blue + soft green accents */
    --bg:#0b0f14; 
    --card:#121822; 
    --muted:#9fb3c8; 
    /* Base palette (dark UI) */
    --bg:#0b0f14;
    --bg2:#0b1016;
    --card:#101723;
    --text:#e6edf3;
    --accent:#7cc4ff;    /* bright ship-blue */
    --accent2:#4de1c1;   /* fresh green accent */
    --border:#1f2937; 
    --focus:#7cc4ff55;
    --muted:#9fb3c8;
    --border:#1f2a3a;

    /* Accents */
    --accent:#7cc4ff;             /* action/CTA blue */
    --accent2:#4de1c1;            /* soft green gradient partner */
    --ship-green:#2bc48a;         /* ShipStation-ish green for question headings */
    --focus:rgba(124,196,255,.35);/* focus ring */

    /* Spacing rhythm */
    --q-gap:16px;    /* gap below inputs/controls */
    --q-top:18px;    /* top margin before each question */
    --card-pad:16px; /* card padding */
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    color:var(--text);
    background:linear-gradient(180deg,#0b0f14,#0b1016 40%,#0b0f14);
    background:linear-gradient(180deg,var(--bg),var(--bg2) 40%,var(--bg));
  }
  .container{max-width:980px;margin:0 auto;padding:20px}

  /* Header centered */
  /* Header */
  header{
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    gap:12px;margin-bottom:12px;text-align:center
  }
  .brand{height:auto;max-width:260px;width:50vw;min-width:160px}
  .title{font-size:clamp(20px,2.6vw,28px);font-weight:700}
  .subtitle{color:var(--muted);font-size:14px}
  .pill{padding:6px 10px;border-radius:999px;background:#0e1420;border:1px solid var(--border);font-size:12px;color:var(--muted)}
  .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
  .pill{
    padding:6px 10px;border-radius:999px;background:#0e1420;border:1px solid var(--border);
    font-size:12px;color:var(--muted)
  }

  /* Cards & sections */
  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:16px;
    padding:var(--card-pad);
    margin:14px 0;
    box-shadow:0 10px 30px rgba(0,0,0,.22)
  }
  .section-title{
    font-size:18px;font-weight:700;margin:6px 0 14px;
    border-left:4px solid var(--accent);padding-left:10px
  }

  /* Uniform question typography + spacing */
  fieldset{border:none;padding:0;margin:0}
  legend,
  .subheader{
    font-weight:700;
    font-size:15px;
    color:var(--ship-green);
    margin:var(--q-top) 0 8px; /* consistent top space before every question */
  }

  /* Inputs with consistent breathing room */
  select, textarea, input[type=text], .tagpicker{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1px solid var(--border);
    background:#0f1624;
    color:var(--text);
    margin:8px 0 var(--q-gap);
  }
  textarea{min-height:96px;resize:vertical}

  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin:14px 0;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .section-title{font-size:18px;font-weight:700;margin:6px 0 14px;border-left:4px solid var(--accent);padding-left:10px}
  fieldset{border:none;padding:0;margin:0 0 8px}
  /* Uniform question text across legends & subheaders */
  legend,.subheader{font-weight:700;margin:14px 0 8px;font-size:15px;color:var(--text)}
  label.option{display:flex;align-items:flex-start;gap:10px;padding:12px;border:1px solid var(--border);border-radius:12px;background:#0f1520;cursor:pointer}
  /* Radio/checkbox options */
  label.option{
    display:flex;align-items:flex-start;gap:10px;
    padding:12px;border:1px solid var(--border);border-radius:12px;
    background:#0f1624;cursor:pointer;margin:6px 0 var(--q-gap);
  }
  label.option:hover{border-color:#2b3a4f}
  input[type=radio],input[type=checkbox]{width:18px;height:18px;margin-top:2px}
  .opt-title{font-weight:600}

  /* Grid helpers */
  .grid{display:grid;gap:10px}
  @media(min-width:700px){.cols-2{grid-template-columns:1fr 1fr}}

  /* Desktop two-column niceties */
  /* Two-column niceties */
  @media(min-width:900px){
    .cols-2.extra-gap{gap:24px}
    .cols-2.with-divider > *:nth-child(2n){
      border-left:1px solid var(--border);
      padding-left:18px;
      margin-left:6px;
      padding-left:18px;margin-left:6px;
    }
  }

  select, textarea, input[type=text]{
    width:100%;padding:12px;border-radius:10px;border:1px solid var(--border);
    background:#0f1520;color:var(--text)
  }
  textarea{min-height:90px;resize:vertical}

  /* Buttons right-aligned per your last change */
  /* Buttons (aligned right) */
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;justify-content:flex-end}
  .btn{appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;color:#061016;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 6px 20px rgba(80,180,220,.35)}
  .btn{
    appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;
    color:#061016;background:linear-gradient(135deg,var(--accent),var(--accent2));
    box-shadow:0 6px 20px rgba(80,180,220,.35)
  }
  .btn.secondary{background:#101826;color:var(--text);border:1px solid var(--border)}
  .btn.link{background:transparent;border:1px dashed var(--border);color:var(--text)}

  /* Result + badges + banner */
  .hidden{display:none !important}
  .result{display:none}
  .result.show{display:block}
  .badges{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
  .badge{border:1px solid var(--border);background:#0f1520;border-radius:10px;padding:6px 10px;font-size:12px}
  .banner{border:1px dashed #2b3a4f;background:#0d1420;padding:14px;border-radius:12px;margin:12px 0}
  .badge{
    border:1px solid var(--border);background:#0f1624;border-radius:10px;
    padding:6px 10px;font-size:12px
  }
  .banner{
    border:1px dashed #2b3a4f;background:#0d1420;
    padding:14px;border-radius:12px;margin:12px 0
  }

  /* Table */
  table{width:100%;border-collapse:collapse;font-size:14px}
  th,td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
  th{color:var(--muted);font-weight:600}
  .muted{color:var(--muted)}
  input:focus-visible + .opt-title, label.option:has(input:focus-visible){outline:3px solid var(--focus)}

  /* Focus states */
  input:focus-visible + .opt-title,
  label.option:has(input:focus-visible){outline:3px solid var(--focus)}

  /* Collapsible details */
  details.hint{margin:6px 0 0 28px}
@@ -97,13 +157,29 @@
  /* Standalone spacing block */
  .solo-block{margin-top:22px;padding-top:10px;border-top:1px dashed var(--border)}

  /* Store picker bits remain tuned to dark theme */
  /* Discovery helpers */
  .discovery-lead{font-size:13px;color:var(--muted);margin:-2px 0 12px}
  .checklist{display:grid;grid-template-columns:1fr;gap:10px}
  .checklist label{
    display:flex;align-items:center;gap:10px;padding:10px;border:1px dashed var(--border);
    border-radius:10px;background:#0f1624;margin:4px 0
  }
  @media(min-width:700px){ .checklist{grid-template-columns:1fr 1fr} }

  /* Store picker (typeahead) */
  .tagpicker{position:relative}
  .tagchips{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 8px}
  .tagchip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#0f1520;border:1px solid var(--border);font-size:12px}
  .tagchips{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 var(--q-gap)}
  .tagchip{
    display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;
    background:#0f1624;border:1px solid var(--border);font-size:12px
  }
  .tagchip button{all:unset;cursor:pointer;font-weight:700;color:var(--muted)}
  .taginput{width:100%;padding:12px;border-radius:10px;border:1px solid var(--border);background:#0f1520;color:var(--text)}
  .suggest{position:absolute;z-index:20;left:0;right:0;top:100%;margin-top:4px;background:#0f1520;border:1px solid var(--border);border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.35);max-height:230px;overflow:auto}
  .taginput{background:#0f1624}
  .suggest{
    position:absolute;z-index:20;left:0;right:0;top:100%;margin-top:4px;
    background:#0f1624;border:1px solid var(--border);border-radius:10px;
    box-shadow:0 8px 24px rgba(0,0,0,.35);max-height:230px;overflow:auto
  }
  .suggest .opt{padding:10px 12px;cursor:pointer;border-bottom:1px solid var(--border)}
  .suggest .opt:last-child{border-bottom:none}
  .suggest .opt[aria-selected="true"], .suggest .opt:hover{background:#101826}
@@ -124,11 +200,11 @@
    #sec-api .solo-block{margin-top:36px;padding-top:16px}
  }
</style>

</head>
<body>
<div class="container">
  <header>
    <!-- Default is Auctane logo; JS swaps after first selection -->
    <img class="brand" id="brandLogo" src="Auctane%20BoxedLockup%20White%20RGB.png" alt="Auctane" />
    <div class="title">ShipStation Platform and Plan Guide</div>
    <div class="subtitle">Mobile friendly guided discovery for field reps Â· Requirement based plan selection</div>
@@ -149,6 +225,7 @@
          <input type="radio" name="platform" value="UI">
          <div><div class="opt-title">In our app (ShipStation UI)</div></div>
        </label>

        <label class="option">
          <input type="radio" name="platform" value="API">
          <div><div class="opt-title">In their system (ShipStation API)</div></div>
@@ -163,16 +240,22 @@
    <fieldset>
      <legend>Do they have access to developer resources?</legend>
      <div class="grid cols-2 extra-gap with-divider">
        <label class="option"><input type="radio" name="api_dev" value="Yes"><div><div class="opt-title">Yes</div></div></label>
        <label class="option"><input type="radio" name="api_dev" value="No"><div><div class="opt-title">No</div></div></label>
        <label class="option">
          <input type="radio" name="api_dev" value="Yes"><div><div class="opt-title">Yes</div></div>
        </label>
        <label class="option">
          <input type="radio" name="api_dev" value="No"><div><div class="opt-title">No</div></div>
        </label>
      </div>
    </fieldset>

    <div class="grid cols-2 extra-gap with-divider">
      <fieldset>
        <legend>Do they need 3PL functionality?</legend>
        <label class="option"><input type="radio" name="api_3pl" value="Yes"><div><div class="opt-title">Yes</div></div></label>
        <label class="option"><input type="radio" name="api_3pl" value="No"><div><div class="opt-title">No</div></div></label>
      </fieldset>

      <fieldset>
        <legend>Do they need Platform Elements?</legend>
        <label class="option"><input type="radio" name="api_pe" value="Yes"><div><div class="opt-title">Yes</div></div></label>
@@ -192,11 +275,12 @@
      <textarea id="api_disc_q1" name="api_disc_q1" placeholder="Rep notes..."></textarea>

      <label class="subheader">2. Where do you sell your products today?</label>
      <!-- TYPEAHEAD MULTI-SELECT (API) -->
      <div class="tagpicker" id="apiStorePicker">
        <div class="tagchips" data-role="chips"></div>
        <input class="taginput" type="text" placeholder="Start typing a store (e.g., Shopify, Amazon, WooCommerce)â¦" aria-label="Store search" />
        <div class="suggest hidden" data-role="suggest"></div>
        <div class="tagerror" data-role="error"></div>
        <div class="suggest hidden" role="listbox"></div>
        <div class="tagerror" aria-live="polite"></div>
        <input type="hidden" name="api_disc_q2" value="[]">
      </div>

@@ -251,6 +335,7 @@
        <label class="option"><input type="radio" name="returns" value="Yes"><div><div class="opt-title">Yes</div></div></label>
      </fieldset>

      <!-- Remaining Users + Feature questions appended here -->
      <fieldset>
        <legend>How many users do you need?</legend>
        <div class="grid cols-2 extra-gap with-divider">
@@ -299,10 +384,6 @@
      </fieldset>
    </div>

    <div class="banner" style="margin-top:12px">
      <strong>RECAP HERE & CONFIRM</strong> â âFROM WHAT I AM HEARING <em>[INSERT RECAP STATEMENT FROM BOXES ABOVE]</em> IS THAT CORRECT?â
    </div>

    <div class="section-title" style="margin-top:16px">Process Discovery</div>
    <div class="discovery-lead">PROCESS DISCOVERY - GET VERY SPECIFIC! Make sure you get very detailed in their shipping process.</div>

@@ -331,16 +412,16 @@

    <div class="section-title" style="margin-top:12px">Onboarding Checklist</div>
    <div class="checklist">
      <label><input type="checkbox" name="api_onboard" value="Connect Selling Channel"> <span>Connect Selling Channel</span></label>
      <label><input type="checkbox" name="api_onboard" value="Set Ship From Location"> <span>Set Ship From Location</span></label>
      <label><input type="checkbox" name="api_onboard" value="Set up Carriers"> <span>Set up Carriers</span></label>
      <label><input type="checkbox" name="api_onboard" value="Set up Automation (at least 1)"> <span>Set up Automation (at least 1)</span></label>
      <label><input type="checkbox" name="api_onboard" value="Discuss/Explain Inventory"> <span>Discuss/Explain Inventory</span></label>
      <label><input type="checkbox" name="api_onboard" value="Discuss/Explain Returns"> <span>Discuss/Explain Returns</span></label>
      <label><input type="checkbox" name="api_onboard" value="Set up Subscription w/ ACH or Card"> <span>Set up Subscription w/ ACH or Card</span></label>
      <label><input type="checkbox" name="api_onboard" value="Configure a Label / Ensure they know how to print"> <span>Configure a Label / Ensure they know how to print</span></label>
      <label><input type="checkbox" name="api_onboard" value="Support Resources"> <span>Support Resources</span></label>
      <label><input type="checkbox" name="api_onboard" value="Definitive Next Steps / Follow Up"> <span>Definitive Next Steps / Follow Up</span></label>
      <label><input type="checkbox" name="onb" value="Connect Selling Channel"> Connect Selling Channel</label>
      <label><input type="checkbox" name="onb" value="Set Ship From Location"> Set Ship From Location</label>
      <label><input type="checkbox" name="onb" value="Set up Carriers"> Set up Carriers</label>
      <label><input type="checkbox" name="onb" value="Set up Automation (at least 1)"> Set up Automation (at least 1)</label>
      <label><input type="checkbox" name="onb" value="Discuss/Explain Inventory"> Discuss/Explain Inventory</label>
      <label><input type="checkbox" name="onb" value="Discuss/Explain Returns"> Discuss/Explain Returns</label>
      <label><input type="checkbox" name="onb" value="Set up Subscription w/ ACH or Card"> Set up Subscription w/ ACH or Card</label>
      <label><input type="checkbox" name="onb" value="Configure a Label / Ensure they know how to print"> Configure a Label / Ensure they know how to print</label>
      <label><input type="checkbox" name="onb" value="Support Resources"> Support Resources</label>
      <label><input type="checkbox" name="onb" value="Definitive Next Steps / Follow Up"> Definitive Next Steps / Follow Up</label>
    </div>
  </section>

@@ -355,11 +436,12 @@
      <textarea id="ui_disc_q1" name="ui_disc_q1" placeholder="Rep notes..."></textarea>

      <label class="subheader">2. Where do you sell your products today?</label>
      <!-- TYPEAHEAD MULTI-SELECT (UI) -->
      <div class="tagpicker" id="uiStorePicker">
        <div class="tagchips" data-role="chips"></div>
        <input class="taginput" type="text" placeholder="Start typing a store (e.g., Shopify, Amazon, WooCommerce)â¦" aria-label="Store search" />
        <div class="suggest hidden" data-role="suggest"></div>
        <div class="tagerror" data-role="error"></div>
        <div class="suggest hidden" role="listbox"></div>
        <div class="tagerror" aria-live="polite"></div>
        <input type="hidden" name="ui_disc_q2" value="[]">
      </div>

@@ -414,6 +496,7 @@
        <label class="option"><input type="radio" name="returns" value="Yes"><div><div class="opt-title">Yes</div></div></label>
      </fieldset>

      <!-- Remaining Users + Feature questions appended here -->
      <fieldset>
        <legend>How many users do you need?</legend>
        <div class="grid cols-2 extra-gap with-divider">
@@ -462,10 +545,6 @@
      </fieldset>
    </div>

    <div class="banner" style="margin-top:12px">
      <strong>RECAP HERE & CONFIRM</strong> â âFROM WHAT I AM HEARING <em>[INSERT RECAP STATEMENT FROM BOXES ABOVE]</em> IS THAT CORRECT?â
    </div>

    <div class="section-title" style="margin-top:16px">Process Discovery</div>
    <div class="discovery-lead">PROCESS DISCOVERY - GET VERY SPECIFIC!</div>

@@ -494,16 +573,16 @@

    <div class="section-title" style="margin-top:12px">Onboarding Checklist</div>
    <div class="checklist">
      <label><input type="checkbox" name="ui_onboard" value="Connect Selling Channel"> <span>Connect Selling Channel</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Set Ship From Location"> <span>Set Ship From Location</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Set up Carriers"> <span>Set up Carriers</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Set up Automation (at least 1)"> <span>Set up Automation (at least 1)</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Discuss/Explain Inventory"> <span>Discuss/Explain Inventory</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Discuss/Explain Returns"> <span>Discuss/Explain Returns</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Set up Subscription w/ ACH or Card"> <span>Set up Subscription w/ ACH or Card</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Configure a Label / Ensure they know how to print"> <span>Configure a Label / Ensure they know how to print</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Support Resources"> <span>Support Resources</span></label>
      <label><input type="checkbox" name="ui_onboard" value="Definitive Next Steps / Follow Up"> <span>Definitive Next Steps / Follow Up</span></label>
      <label><input type="checkbox" name="onb" value="Connect Selling Channel"> Connect Selling Channel</label>
      <label><input type="checkbox" name="onb" value="Set Ship From Location"> Set Ship From Location</label>
      <label><input type="checkbox" name="onb" value="Set up Carriers"> Set up Carriers</label>
      <label><input type="checkbox" name="onb" value="Set up Automation (at least 1)"> Set up Automation (at least 1)</label>
      <label><input type="checkbox" name="onb" value="Discuss/Explain Inventory"> Discuss/Explain Inventory</label>
      <label><input type="checkbox" name="onb" value="Discuss/Explain Returns"> Discuss/Explain Returns</label>
      <label><input type="checkbox" name="onb" value="Set up Subscription w/ ACH or Card"> Set up Subscription w/ ACH or Card</label>
      <label><input type="checkbox" name="onb" value="Configure a Label / Ensure they know how to print"> Configure a Label / Ensure they know how to print</label>
      <label><input type="checkbox" name="onb" value="Support Resources"> Support Resources</label>
      <label><input type="checkbox" name="onb" value="Definitive Next Steps / Follow Up"> Definitive Next Steps / Follow Up</label>
    </div>
  </section>

@@ -564,59 +643,123 @@
    "Premium": {"50":349.99,"100":399.99,"500":449.99,"1000":599.99,"2000":699.99,"5000":799.99,"7500":949.99,"10000":1099.99,"15000":1349.99,"20000":1499.99,"20000+":"Custom Pricing"}
  };

  /* ===== Store Integrations (truncated to what you provided earlier) ===== */
  /* ===== Supported Store Integrations (from your list) ===== */
  var STORE_INTEGRATIONS = [
    {name:'Acumatica',slug:'acumatica',aliases:[]},{name:'Alibaba',slug:'alibaba',aliases:[]},
    {name:'Acumatica',slug:'acumatica',aliases:[]},
    {name:'Alibaba',slug:'alibaba',aliases:[]},
    {name:'Amazon Marketplace',slug:'amazon_marketplace',aliases:['amazon']},
    {name:'AmeriCommerce',slug:'americommerce',aliases:[]},{name:'AmmoReady',slug:'ammoready',aliases:[]},
    {name:'Back Market',slug:'back_market',aliases:[]},{name:'Bandcamp',slug:'bandcamp',aliases:[]},
    {name:'Best Buy CA',slug:'best_buy_ca',aliases:['best buy canada']},{name:'Big Cartel',slug:'big_cartel',aliases:[]},
    {name:'BigCommerce',slug:'bigcommerce',aliases:['big commerce']},{name:'Bluepark',slug:'bluepark',aliases:[]},
    {name:'Bonanza',slug:'bonanza',aliases:[]},{name:'Brightpearl',slug:'brightpearl',aliases:[]},
    {name:'Cdiscount',slug:'cdiscount',aliases:[]},{name:'ChannelEngine',slug:'channelengine',aliases:[]},
    {name:'Channel Pilot',slug:'channel_pilot',aliases:[]},{name:'ChannelSale',slug:'channelsale',aliases:[]},
    {name:'Cin7 Core',slug:'cin7_core',aliases:['dear systems','dear']},{name:'Cin7 Omni',slug:'cin7_omni',aliases:[]},
    {name:'Convictional',slug:'convictional',aliases:[]},{name:'CoreCommerce',slug:'corecommerce',aliases:[]},
    {name:'Coupang',slug:'coupang',aliases:[]},{name:'Cratejoy',slug:'cratejoy',aliases:[]},
    {name:'CS-Cart',slug:'cs_cart',aliases:['cscart']},{name:'Darty',slug:'darty',aliases:[]},
    {name:'eBay',slug:'ebay',aliases:['ebay stores']},{name:'Ecwid',slug:'ecwid',aliases:[]},
    {name:'EKM',slug:'ekm',aliases:['ekm powershop']},{name:'Etsy',slug:'etsy',aliases:[]},
    {name:'AmeriCommerce',slug:'americommerce',aliases:[]},
    {name:'AmmoReady',slug:'ammoready',aliases:[]},
    {name:'Back Market',slug:'back_market',aliases:[]},
    {name:'Bandcamp',slug:'bandcamp',aliases:[]},
    {name:'Best Buy CA',slug:'best_buy_ca',aliases:['best buy canada']},
    {name:'Big Cartel',slug:'big_cartel',aliases:[]},
    {name:'BigCommerce',slug:'bigcommerce',aliases:['big commerce']},
    {name:'Bluepark',slug:'bluepark',aliases:[]},
    {name:'Bonanza',slug:'bonanza',aliases:[]},
    {name:'Brightpearl',slug:'brightpearl',aliases:[]},
    {name:'Cdiscount',slug:'cdiscount',aliases:[]},
    {name:'ChannelEngine',slug:'channelengine',aliases:[]},
    {name:'Channel Pilot',slug:'channel_pilot',aliases:[]},
    {name:'ChannelSale',slug:'channelsale',aliases:[]},
    {name:'Cin7 Core',slug:'cin7_core',aliases:['dear systems','dear']},
    {name:'Cin7 Omni',slug:'cin7_omni',aliases:[]},
    {name:'Convictional',slug:'convictional',aliases:[]},
    {name:'CoreCommerce',slug:'corecommerce',aliases:[]},
    {name:'Coupang',slug:'coupang',aliases:[]},
    {name:'Cratejoy',slug:'cratejoy',aliases:[]},
    {name:'CS-Cart',slug:'cs_cart',aliases:['cscart']},
    {name:'Darty',slug:'darty',aliases:[]},
    {name:'eBay',slug:'ebay',aliases:['ebay stores']},
    {name:'Ecwid',slug:'ecwid',aliases:[]},
    {name:'EKM',slug:'ekm',aliases:['ekm powershop']},
    {name:'Etsy',slug:'etsy',aliases:[]},
    {name:'Extensiv (formerly Scout topShelf)',slug:'extensiv',aliases:['scout topshelf','topshelf']},
    {name:'Faire',slug:'faire',aliases:[]},{name:'FNAC',slug:'fnac',aliases:[]},{name:'GeekSeller',slug:'geekseller',aliases:[]},
    {name:'Groopdealz',slug:'groopdealz',aliases:[]},{name:'Groupon Goods',slug:'groupon_goods',aliases:['groupon']},
    {name:'Handshake',slug:'handshake',aliases:[]},{name:'Houzz',slug:'houzz',aliases:[]},{name:'Idealo',slug:'idealo',aliases:[]},
    {name:'InkSoft',slug:'inksoft',aliases:[]},{name:'Joom',slug:'joom',aliases:[]},{name:'Kaufland',slug:'kaufland',aliases:[]},
    {name:'Lengow',slug:'lengow',aliases:[]},{name:'Liftoff',slug:'liftoff',aliases:[]},{name:'Linnworks',slug:'linnworks',aliases:[]},
    {name:'Listing Mirror',slug:'listing_mirror',aliases:[]},{name:'Magento',slug:'magento',aliases:['adobe commerce']},
    {name:'Marketplacer',slug:'marketplacer',aliases:[]},{name:'Mercado Libre',slug:'mercado_libre',aliases:['mercadolibre']},
    {name:'Michaels',slug:'michaels',aliases:[]},{name:'MijoShop',slug:'mijoshop',aliases:[]},{name:'Mirakl',slug:'mirakl',aliases:[]},
    {name:'Miva',slug:'miva',aliases:[]},{name:'Miva Connect',slug:'miva_connect',aliases:[]},{name:'Modern Retail',slug:'modern_retail',aliases:[]},
    {name:'MoreCommerce',slug:'morecommerce',aliases:[]},{name:'Neto by Maropost',slug:'neto_by_maropost',aliases:['neto','maropost']},
    {name:'Netsuite',slug:'netsuite',aliases:['oracle netsuite']},{name:'Newegg',slug:'newegg',aliases:[]},
    {name:'Notonthehighstreet',slug:'notonthehighstreet',aliases:['noths']},{name:'OnBuy',slug:'onbuy',aliases:[]},
    {name:'OpenCart',slug:'opencart',aliases:[]},{name:'Order Time',slug:'order_time',aliases:['ordertime']},
    {name:'Overstock.com',slug:'overstock',aliases:['overstock com']},{name:'Oxatis',slug:'oxatis',aliases:[]},{name:'PayPal',slug:'paypal',aliases:[]},
    {name:'PrestaShop',slug:'prestashop',aliases:['presta']},{name:'Quickbooks Commerce',slug:'quickbooks_commerce',aliases:['tradegecko','qbo commerce']},
    {name:'Rakuten',slug:'rakuten',aliases:[]},{name:'Reverb',slug:'reverb',aliases:[]},{name:'RevolutionParts',slug:'revolutionparts',aliases:[]},
    {name:'Faire',slug:'faire',aliases:[]},
    {name:'FNAC',slug:'fnac',aliases:[]},
    {name:'GeekSeller',slug:'geekseller',aliases:[]},
    {name:'Groopdealz',slug:'groopdealz',aliases:[]},
    {name:'Groupon Goods',slug:'groupon_goods',aliases:['groupon']},
    {name:'Handshake',slug:'handshake',aliases:[]},
    {name:'Houzz',slug:'houzz',aliases:[]},
    {name:'Idealo',slug:'idealo',aliases:[]},
    {name:'InkSoft',slug:'inksoft',aliases:[]},
    {name:'Joom',slug:'joom',aliases:[]},
    {name:'Kaufland',slug:'kaufland',aliases:[]},
    {name:'Lengow',slug:'lengow',aliases:[]},
    {name:'Liftoff',slug:'liftoff',aliases:[]},
    {name:'Linnworks',slug:'linnworks',aliases:[]},
    {name:'Listing Mirror',slug:'listing_mirror',aliases:[]},
    {name:'Magento',slug:'magento',aliases:['adobe commerce']},
    {name:'Marketplacer',slug:'marketplacer',aliases:[]},
    {name:'Mercado Libre',slug:'mercado_libre',aliases:['mercadolibre']},
    {name:'Michaels',slug:'michaels',aliases:[]},
    {name:'MijoShop',slug:'mijoshop',aliases:[]},
    {name:'Mirakl',slug:'mirakl',aliases:[]},
    {name:'Miva',slug:'miva',aliases:[]},
    {name:'Miva Connect',slug:'miva_connect',aliases:[]},
    {name:'Modern Retail',slug:'modern_retail',aliases:[]},
    {name:'MoreCommerce',slug:'morecommerce',aliases:[]},
    {name:'Neto by Maropost',slug:'neto_by_maropost',aliases:['neto','maropost']},
    {name:'Netsuite',slug:'netsuite',aliases:['oracle netsuite']},
    {name:'Newegg',slug:'newegg',aliases:[]},
    {name:'Notonthehighstreet',slug:'notonthehighstreet',aliases:['noths']},
    {name:'OnBuy',slug:'onbuy',aliases:[]},
    {name:'OpenCart',slug:'opencart',aliases:[]},
    {name:'Order Time',slug:'order_time',aliases:['ordertime']},
    {name:'Overstock.com',slug:'overstock',aliases:['overstock com']},
    {name:'Oxatis',slug:'oxatis',aliases:[]},
    {name:'PayPal',slug:'paypal',aliases:[]},
    {name:'PrestaShop',slug:'prestashop',aliases:['presta']},
    {name:'Quickbooks Commerce',slug:'quickbooks_commerce',aliases:['tradegecko','qbo commerce']},
    {name:'Rakuten',slug:'rakuten',aliases:[]},
    {name:'Reverb',slug:'reverb',aliases:[]},
    {name:'RevolutionParts',slug:'revolutionparts',aliases:[]},
    {name:'Rithum (formerly ChannelAdvisor)',slug:'rithum',aliases:['channeladvisor']},
    {name:'Salesforce Commerce Cloud',slug:'salesforce_commerce_cloud',aliases:['sfcc','demandware']},
    {name:'Salesforce Core',slug:'salesforce_core',aliases:['salesforce']},{name:'Sears',slug:'sears',aliases:[]},
    {name:'Sellbrite',slug:'sellbrite',aliases:[]},{name:'SellerActive',slug:'selleractive',aliases:[]},{name:'Shein',slug:'shein',aliases:[]},
    {name:'Shift4Shop',slug:'shift4shop',aliases:['3dcart']},{name:'Shop.com',slug:'shop_com',aliases:['shop dot com']},
    {name:'Shop Premium Outlets',slug:'shop_premium_outlets',aliases:['spo']},{name:'Shopify',slug:'shopify',aliases:['shopify plus']},
    {name:'ShoppingFeed',slug:'shoppingfeed',aliases:[]},{name:'Shopware v6 Cloud',slug:'shopware_v6_cloud',aliases:['shopware']},
    {name:'SimplyDepo',slug:'simplydepo',aliases:[]},{name:'Sophio',slug:'sophio',aliases:[]},{name:'SOS Inventory',slug:'sos_inventory',aliases:[]},
    {name:'Spark Shipping',slug:'spark_shipping',aliases:[]},{name:'Spartoo',slug:'spartoo',aliases:[]},
    {name:'Salesforce Core',slug:'salesforce_core',aliases:['salesforce']},
    {name:'Sears',slug:'sears',aliases:[]},
    {name:'Sellbrite',slug:'sellbrite',aliases:[]},
    {name:'SellerActive',slug:'selleractive',aliases:[]},
    {name:'Shein',slug:'shein',aliases:[]},
    {name:'Shift4Shop',slug:'shift4shop',aliases:['3dcart']},
    {name:'Shop.com',slug:'shop_com',aliases:['shop dot com']},
    {name:'Shop Premium Outlets',slug:'shop_premium_outlets',aliases:['spo']},
    {name:'Shopify',slug:'shopify',aliases:['shopify plus']},
    {name:'ShoppingFeed',slug:'shoppingfeed',aliases:[]},
    {name:'Shopware v6 Cloud',slug:'shopware_v6_cloud',aliases:['shopware']},
    {name:'SimplyDepo',slug:'simplydepo',aliases:[]},
    {name:'Sophio',slug:'sophio',aliases:[]},
    {name:'SOS Inventory',slug:'sos_inventory',aliases:[]},
    {name:'Spark Shipping',slug:'spark_shipping',aliases:[]},
    {name:'Spartoo',slug:'spartoo',aliases:[]},
    {name:'Square Online Store',slug:'square_online_store',aliases:['square online','square']},
    {name:'Squarespace',slug:'squarespace',aliases:[]},{name:'Storenvy',slug:'storenvy',aliases:[]},{name:'SureDone',slug:'suredone',aliases:[]},
    {name:'Tanga',slug:'tanga',aliases:[]},{name:'TikTok Shop',slug:'tiktok_shop',aliases:['tiktok']},{name:'Tophatter',slug:'tophatter',aliases:[]},
    {name:'Turbify',slug:'turbify',aliases:['yahoo stores','yahoo small business']},{name:'UltraCart',slug:'ultracart',aliases:[]},
    {name:'Visualsoft',slug:'visualsoft',aliases:[]},{name:'Volo Commerce',slug:'volo_commerce',aliases:[]},{name:'Volusion',slug:'volusion',aliases:[]},
    {name:'VTEX',slug:'vtex',aliases:[]},{name:'Walmart',slug:'walmart',aliases:[]},{name:'Walmart Canada',slug:'walmart_canada',aliases:['walmart ca']},
    {name:'Wayfair',slug:'wayfair',aliases:[]},{name:'Web Shop Manager',slug:'web_shop_manager',aliases:[]},{name:'Webflow',slug:'webflow',aliases:[]},
    {name:'Weebly',slug:'weebly',aliases:[]},{name:'Wish',slug:'wish',aliases:[]},{name:'Wix',slug:'wix',aliases:[]},
    {name:'WooCommerce',slug:'woocommerce',aliases:['woo']},{name:'X-Cart',slug:'x_cart',aliases:['xcart']},{name:'xentral',slug:'xentral',aliases:[]},
    {name:'Yumbles',slug:'yumbles',aliases:[]},{name:'Zen Cart',slug:'zen_cart',aliases:['zencart']},{name:'Zoey',slug:'zoey',aliases:[]},
    {name:'Squarespace',slug:'squarespace',aliases:[]},
    {name:'Storenvy',slug:'storenvy',aliases:[]},
    {name:'SureDone',slug:'suredone',aliases:[]},
    {name:'Tanga',slug:'tanga',aliases:[]},
    {name:'TikTok Shop',slug:'tiktok_shop',aliases:['tiktok']},
    {name:'Tophatter',slug:'tophatter',aliases:[]},
    {name:'Turbify',slug:'turbify',aliases:['yahoo stores','yahoo small business']},
    {name:'UltraCart',slug:'ultracart',aliases:[]},
    {name:'Visualsoft',slug:'visualsoft',aliases:[]},
    {name:'Volo Commerce',slug:'volo_commerce',aliases:[]},
    {name:'Volusion',slug:'volusion',aliases:[]},
    {name:'VTEX',slug:'vtex',aliases:[]},
    {name:'Walmart',slug:'walmart',aliases:[]},
    {name:'Walmart Canada',slug:'walmart_canada',aliases:['walmart ca']},
    {name:'Wayfair',slug:'wayfair',aliases:[]},
    {name:'Web Shop Manager',slug:'web_shop_manager',aliases:[]},
    {name:'Webflow',slug:'webflow',aliases:[]},
    {name:'Weebly',slug:'weebly',aliases:[]},
    {name:'Wish',slug:'wish',aliases:[]},
    {name:'Wix',slug:'wix',aliases:[]},
    {name:'WooCommerce',slug:'woocommerce',aliases:['woo']},
    {name:'X-Cart',slug:'x_cart',aliases:['xcart']},
    {name:'xentral',slug:'xentral',aliases:[]},
    {name:'Yumbles',slug:'yumbles',aliases:[]},
    {name:'Zen Cart',slug:'zen_cart',aliases:['zencart']},
    {name:'Zoey',slug:'zoey',aliases:[]},
    {name:'Zonos',slug:'zonos',aliases:[]}
  ];

@@ -628,7 +771,7 @@
      show(q('#sec-api-discovery'), v==='API');
      show(q('#sec-ui-discovery'), v==='UI');
      show(q('#sec-addons'), v==='UI');     // add-ons only for UI
      show(q('#sec-actions'), !!v);
      show(q('#sec-actions'), !!v);         // actions for both paths
      q('#sec-result').classList.remove('show');

      var logo = q('#brandLogo');
@@ -823,130 +966,123 @@
    return labels[field] || (field+': '+value);
  }

  /* TagPicker: typeahead + chips with validation */
  /* ===== TagPicker: typeahead + chips with validation ===== */
  function TagPicker(rootEl, opts){
    this.root = rootEl;
    this.input = rootEl.querySelector('.taginput');
    this.chipsEl = rootEl.querySelector('[data-role="chips"]');
    this.suggestEl = rootEl.querySelector('[data-role="suggest"]');
    this.errorEl = rootEl.querySelector('[data-role="error"]');
    this.hidden = rootEl.querySelector('input[type=hidden]');
    this.suggest = rootEl.querySelector('.suggest');
    this.chipsBox = rootEl.querySelector('[data-role="chips"]');
    this.errorEl = rootEl.querySelector('.tagerror');
    this.hidden = rootEl.querySelector('input[type="hidden"]');
    this.items = (opts && opts.items) || [];
    this.maxSuggestions = (opts && opts.maxSuggestions) || 8;
    this.selected = [];
    this.highlightIndex = -1;

    var self = this;
    function norm(s){ return String(s||'').trim().toLowerCase(); }

    function matches(q, item){
      if(!q) return false;
      q = norm(q);
      if(norm(item.name).includes(q)) return true;
      if(item.aliases && item.aliases.some(function(a){ return norm(a).includes(q); })) return true;
      return false;
    }

    this.renderChips = function(){
      this.chipsEl.innerHTML = this.selected.map(function(it,i){
        return '<span class="tagchip" data-idx="'+i+'">'+it.name+' <button title="Remove" aria-label="Remove '+it.name+'">Ã</button></span>';
    function renderChips(){
      self.chipsBox.innerHTML = self.selected.map(function(it,idx){
        return '<span class="tagchip" data-idx="'+idx+'">'+
               it.name+' <button title="Remove" aria-label="Remove">Ã</button></span>';
      }).join('');
      this.hidden.value = JSON.stringify(this.selected.map(function(it){ return it.slug; }));
    };

    this.clearError = function(){ this.errorEl.textContent=''; };
    this.showError = function(msg){ this.errorEl.textContent = msg || 'Store not found/supported.'; };

    this.filtered = [];
    this.updateSuggest = function(){
      var qv = this.input.value;
      if(!qv){ this.suggestEl.classList.add('hidden'); this.suggestEl.innerHTML=''; this.highlightIndex=-1; return; }
      this.filtered = this.items.filter(function(it){
        var taken = self.selected.some(function(s){ return s.slug===it.slug; });
        return !taken && matches(qv,it);
      }).slice(0, this.maxSuggestions);

      if(this.filtered.length===0){
        this.suggestEl.innerHTML = '<div class="opt muted">No matches</div>';
        this.suggestEl.classList.remove('hidden');
        this.highlightIndex = -1;
        return;
      }
      this.suggestEl.innerHTML = this.filtered.map(function(it,idx){
        return '<div class="opt" role="option" data-idx="'+idx+'" aria-selected="'+(idx===self.highlightIndex)+'">'+it.name+'</div>';
      self.hidden.value = JSON.stringify(self.selected.map(function(it){ return it.slug; }));
    }
    function filterItems(q){
      var s = q.trim().toLowerCase();
      if(!s) return [];
      return self.items.filter(function(it){
        var all = [it.name].concat(it.aliases||[]);
        return all.some(function(n){ return n.toLowerCase().indexOf(s)>=0; });
      }).slice(0,50);
    }
    function openSuggest(list){
      if(!list.length){ self.suggest.classList.add('hidden'); self.suggest.innerHTML=''; return; }
      self.suggest.innerHTML = list.map(function(it,i){
        return '<div class="opt" role="option" data-slug="'+it.slug+'" data-name="'+it.name+'" aria-selected="'+(i===0?'true':'false')+'">'+it.name+'</div>';
      }).join('');
      this.suggestEl.classList.remove('hidden');
    };

    this.add = function(item){
      if(!item) return;
      if(this.selected.some(function(s){ return s.slug===item.slug; })) return;
      this.selected.push({name:item.name, slug:item.slug});
      this.renderChips();
      this.input.value='';
      this.suggestEl.classList.add('hidden');
      this.clearError();
      this.input.focus();
    };
      self.suggest.classList.remove('hidden');
    }
    function closeSuggest(){ self.suggest.classList.add('hidden'); }
    function clearError(){ self.errorEl.textContent=''; self.root.classList.remove('invalid'); }
    function setError(msg){ self.errorEl.textContent=msg; self.root.classList.add('invalid'); }

    function pickBySlug(slug){
      var it = self.items.find(function(x){return x.slug===slug;});
      if(!it) return false;
      if(self.selected.some(function(s){return s.slug===slug;})) return true;
      self.selected.push({name:it.name,slug:it.slug});
      renderChips(); clearError(); return true;
    }

    this.removeIdx = function(idx){
      if(idx<0 || idx>=this.selected.length) return;
      this.selected.splice(idx,1);
      this.renderChips();
    };
    // input events
    this.input.addEventListener('input', function(){
      var list = filterItems(self.input.value);
      openSuggest(list);
      clearError();
    });

    this.input.addEventListener('input', function(){ self.updateSuggest(); self.clearError(); });
    this.input.addEventListener('keydown', function(e){
      var key = e.key;
      if(key==='ArrowDown'){
      var open = !self.suggest.classList.contains('hidden');
      if(e.key==='ArrowDown' && open){
        e.preventDefault();
        if(self.filtered.length){ self.highlightIndex = (self.highlightIndex+1) % self.filtered.length; self.updateSuggestHighlight(); }
      } else if(key==='ArrowUp'){
        var opts = qa('.opt', self.suggest);
        var idx = opts.findIndex(function(o){return o.getAttribute('aria-selected')==='true';});
        if(idx<opts.length-1){ opts[idx].setAttribute('aria-selected','false'); opts[idx+1].setAttribute('aria-selected','true'); }
      } else if(e.key==='ArrowUp' && open){
        e.preventDefault();
        if(self.filtered.length){ self.highlightIndex = (self.highlightIndex-1+self.filtered.length) % self.filtered.length; self.updateSuggestHighlight(); }
      } else if(key==='Enter'){
        var opts2 = qa('.opt', self.suggest);
        var idx2 = opts2.findIndex(function(o){return o.getAttribute('aria-selected')==='true';});
        if(idx2>0){ opts2[idx2].setAttribute('aria-selected','false'); opts2[idx2-1].setAttribute('aria-selected','true'); }
      } else if(e.key==='Enter'){
        e.preventDefault();
        if(self.filtered.length && self.highlightIndex>=0){
          self.add(self.filtered[self.highlightIndex]);
        var chosen = null;
        if(open){
          var sel = q('.opt[aria-selected="true"]', self.suggest);
          if(sel) chosen = {slug:sel.getAttribute('data-slug'), name:sel.getAttribute('data-name')};
        }
        // If not open or nothing highlighted, try exact match
        if(!chosen){
          var v = self.input.value.trim().toLowerCase();
          if(v){
            var exact = self.items.find(function(it){
              return it.name.toLowerCase()===v || (it.aliases||[]).some(function(a){return a.toLowerCase()===v;});
            });
            if(exact) chosen = {slug:exact.slug, name:exact.name};
          }
        }
        if(chosen){
          pickBySlug(chosen.slug);
          self.input.value=''; closeSuggest();
        } else {
          var qv = norm(self.input.value);
          var exact = self.items.find(function(it){
            return norm(it.name)===qv || (it.aliases||[]).some(function(a){ return norm(a)===qv; });
          });
          if(exact){ self.add(exact); }
          else { self.showError('Store not found/supported.'); }
          // Unsupported store
          setError('Store not supported. Please select one from the list.');
        }
      } else if(key==='Backspace' && !self.input.value){
        self.removeIdx(self.selected.length-1);
      } else if(e.key==='Escape'){
        closeSuggest();
      }
    });

    this.updateSuggestHighlight = function(){
      Array.prototype.forEach.call(self.suggestEl.querySelectorAll('.opt'), function(el,i){
        el.setAttribute('aria-selected', i===self.highlightIndex ? 'true':'false');
      });
    };

    this.suggestEl.addEventListener('mousedown', function(e){
      var opt = e.target.closest('.opt'); if(!opt) return;
      var idx = parseInt(opt.getAttribute('data-idx'),10);
      if(!isNaN(idx) && self.filtered[idx]) self.add(self.filtered[idx]);
    // click suggestion
    this.suggest.addEventListener('click', function(e){
      var el = e.target.closest('.opt'); if(!el) return;
      pickBySlug(el.getAttribute('data-slug'));
      self.input.value=''; closeSuggest(); self.input.focus();
    });

    this.chipsEl.addEventListener('click', function(e){
    // remove chip
    this.chipsBox.addEventListener('click', function(e){
      if(e.target.tagName==='BUTTON'){
        var chip = e.target.closest('.tagchip');
        var idx = parseInt(chip.getAttribute('data-idx'),10);
        self.removeIdx(idx);
        var wrap = e.target.closest('.tagchip'); if(!wrap) return;
        var idx = +wrap.getAttribute('data-idx'); self.selected.splice(idx,1);
        renderChips(); clearError();
      }
    });

    this.set = function(values){
      this.selected = [];
      var map = {}; this.items.forEach(function(it){ map[it.slug]=it; });
      (values||[]).forEach(function(sl){ if(map[sl]) self.selected.push({name:map[sl].name, slug:map[sl].slug}); });
      this.renderChips();
    // expose setter
    this.set = function(arr){
      self.selected = (arr||[]).slice();
      renderChips(); clearError();
    };

    renderChips();
  }

  /* ===== Validation (required fields per platform) ===== */
@@ -969,7 +1105,6 @@
      platform==='UI' ? 'ui_value_recap' : 'api_value_recap'
    ]);

    // Helper to mark invalid and collect messages
    var messages = [];
    function needText(sel, label){
      var el = q(sel, scope);
@@ -1016,7 +1151,7 @@
    ok &= needText(platform==='UI' ? '#ui_disc_q7' : '#api_disc_q7', 'Returns notes');
    ok &= needRadio('returns','Advanced returns selection');

    // Remaining feature/user questions (all required)
    // Remaining feature/user questions
    ok &= needRadio('users','User count');
    ok &= needRadio('rules','Unlimited rule automations');
    ok &= needRadio('routing','Auto Routing / Auto Split');
@@ -1028,9 +1163,8 @@
    // Process discovery
    ok &= needText(platform==='UI' ? '#ui_proc_q11' : '#api_proc_q11', 'Process discovery (cart to door)');
    ok &= needText(platform==='UI' ? '#ui_proc_pain1' : '#api_proc_pain1', 'Pain/Challenge 1');
    // 11b/11c optional; recap challenges optional

    // API path radios also required when on API
    // API-only radios also required
    if(platform==='API'){
      ok &= needRadio('api_dev','Developer resources');
      ok &= needRadio('api_3pl','3PL functionality');
@@ -1044,14 +1178,15 @@
      var firstInvalid = q('.invalid', scope);
      if(firstInvalid){
        firstInvalid.scrollIntoView({behavior:'smooth', block:'center'});
        // Try to focus a focusable descendant
        (firstInvalid.querySelector('input,textarea,select') || firstInvalid).focus?.();
      }
      return false;
    }
    return true;
  }

  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]);}); }

  function render(){
    // Block if required fields are missing
    if(!validateRequired()) return;
@@ -1075,7 +1210,7 @@
        ? apiRec.drivers.map(function(d){ return '<span class="badge">'+d+'</span>'; }).join('')
        : '<span class="muted">No specific drivers selected yet.</span>';

      // ==== Recap rows with ALL notes ====
      // Recap rows with ALL notes
      var rows = [
        ['Discovery Question','Answer'],
        ['Where to print labels', 'In their system'],
@@ -1138,7 +1273,6 @@
        ? r.drivers.map(function(d){ return '<span class="badge">'+d+'</span>'; }).join('')
        : '<span class="muted">No higher plan drivers detected. Selection fits the base tier.</span>';

      // ==== Recap rows with ALL notes ====
      var rows2 = [
        ['Category','Answer'],
        ['Users', (r.answers.users||'â')],
@@ -1191,7 +1325,6 @@
    return '';
  }
  function cleanAddonName(tag){ return tag.split(':')[0]; }
  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]);}); }

  // Buttons
  q('#btn-calc').addEventListener('click', render);
@@ -1201,16 +1334,17 @@
    q('#shipments').value = '';
    q('#api_shipments').value = '';
    qa('textarea, input[type=text]').forEach(function(t){ t.value=''; });

    qa('.invalid').forEach(function(el){ el.classList.remove('invalid'); });
    q('#ui-error').classList.add('hidden'); q('#api-error').classList.add('hidden');
    if(window.apiStorePicker){ apiStorePicker.set([]); }
    if(window.uiStorePicker){ uiStorePicker.set([]); }

    [q('#sec-api'),q('#sec-api-discovery'),
     q('#sec-ui-discovery'),
    [q('#sec-api'),q('#sec-ui-discovery'),q('#sec-api-discovery'),
     q('#sec-addons'),q('#sec-actions')].forEach(function(s){ s.classList.add('hidden'); });

    q('#sec-result').classList.remove('show');
    // Reset logo to Auctane
    q('#brandLogo').src = LOGO_DEFAULT; q('#brandLogo').alt='Auctane';
    window.scrollTo({top:0,behavior:'smooth'});
  });
@@ -1235,8 +1369,6 @@
      list('3PL functionality', a.answers.api_3pl || 'â');
      list('Platform Elements', a.answers.api_pe || 'â');
      list('Estimated shipments each month', a.answers.api_shipments || 'â');

      // Text notes
      list('Products sold', q('#api_disc_q1').value||'â');
      list('Where they sell (stores)', (window.apiStorePicker.selected||[]).map(function(it){return it.name;}).join(', ')||'â');
      list('BYOA', (q('input[name=byoa]:checked')||{}).value||'â');
@@ -1273,82 +1405,80 @@
      lines.push('');
      lines.push('Answers & Notes:');
      Object.keys(base.answers).forEach(function(k){ list(k, base.answers[k]); });

      // Text notes
      list('Products sold', q('#ui_disc_q1').value||'â');
      list('Where they sell (stores)', (window.uiStorePicker.selected||[]).map(function(it){return it.name;}).join(', ')||'â');
      list('Carriers', q('#ui_disc_carriers').value||'â');
      list('International?', (q('input[name=intl]:checked')||{}).value||'â');
      list('Inventory notes', q('#ui_disc_q6').value||'â');
      list('Returns notes', q('#ui_disc_q7').value||'â');
      list('Process: cart â door', q('#ui_proc_q11').value||'â');
      list('Pain/Challenge 1', q('#ui_proc_pain1').value||'â');
      if(q('#ui_proc_pain2').value) list('Pain/Challenge 2', q('#ui_proc_pain2').value);
      if(q('#ui_proc_pain3').value) list('Pain/Challenge 3', q('#ui_proc_pain3').value);
      if(q('textarea[name=ui_value_recap]').value) list('Recap challenges', q('textarea[name=ui_value_recap]').value);

      if(base.addons.length){ lines.push('Add ons: ' + base.addons.map(cleanAddonName).join(', ')); }
    }

    var text = lines.join('\n');
    if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(text).then(function(){ alert('Summary copied to clipboard.'); });
    } else {
      var ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
      alert('Summary copied to clipboard.');
    }
  });

  q('#btn-download').addEventListener('click', function(){
    if(!q('#sec-result').classList.contains('show')){ alert('Please click "Show Recommendation" first.'); return; }
    var base = calcRecommendation();
    var payload = base;
    if(base.platform==='API'){ payload.api = recommendAPI(); }

    // Include discovery/process note fields in JSON too
    var extra = {};
    if(base.platform==='API'){
      extra.discovery = {
        products: q('#api_disc_q1').value||'',
        stores: (window.apiStorePicker.selected||[]).map(function(it){return it.name;}),
        carriers: q('#api_disc_carriers').value||'',
        international: (q('input[name=intl]:checked')||{}).value||'',
        inventory_notes: q('#api_disc_q6').value||'',
        returns_notes: q('#api_disc_q7').value||'',
        process: q('#api_proc_q11').value||'',
        pain1: q('#api_proc_pain1').value||'',
        pain2: q('#api_proc_pain2').value||'',
        pain3: q('#api_proc_pain3').value||'',
        recap_value: q('textarea[name=api_value_recap]').value||''
      };
    } else if(base.platform==='UI'){
      extra.discovery = {
        products: q('#ui_disc_q1').value||'',
        stores: (window.uiStorePicker.selected||[]).map(function(it){return it.name;}),
        carriers: q('#ui_disc_carriers').value||'',
        international: (q('input[name=intl]:checked')||{}).value||'',
        inventory_notes: q('#ui_disc_q6').value||'',
        returns_notes: q('#ui_disc_q7').value||'',
        process: q('#ui_proc_q11').value||'',
        pain1: q('#ui_proc_pain1').value||'',
        pain2: q('#ui_proc_pain2').value||'',
        pain3: q('#ui_proc_pain3').value||'',
        recap_value: q('textarea[name=ui_value_recap]').value||''
      };
    }
    payload.extra_notes = extra;

    var blob = new Blob([JSON.stringify(payload,null,2)], {type:'application/json'});
    var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'shipstation_recommendation.json'; a.click(); URL.revokeObjectURL(a.href);
  });

  // === Instantiate store pickers for API + UI ===
  var apiPickerEl = q('#apiStorePicker');
  var uiPickerEl  = q('#uiStorePicker');
  if(apiPickerEl){ window.apiStorePicker = new TagPicker(apiPickerEl, { items: STORE_INTEGRATIONS }); }
  if(uiPickerEl){  window.uiStorePicker  = new TagPicker(uiPickerEl,  { items: STORE_INTEGRATIONS }); }

})();
</script>
</body>
</html>

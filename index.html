<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sales Discovery + Plan Guide (ShipStation)</title>
<style>
  :root{
    --bg:#0b0f14; --card:#121822; --muted:#9fb3c8; --text:#e6edf3;
    --accent:#7cc4ff; --accent2:#4de1c1; --border:#1f2937; --focus:#7cc4ff55;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);background:linear-gradient(180deg,#0b0f14,#0b1016 40%,#0b0f14)}
  .container{max-width:980px;margin:0 auto;padding:20px}

  header{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;margin-bottom:12px;text-align:center}
  .brand{height:auto;max-width:260px;width:50vw;min-width:160px}
  .title{font-size:clamp(20px,2.6vw,28px);font-weight:700}
  .subtitle{color:var(--muted);font-size:14px}
  .pill{padding:6px 10px;border-radius:999px;background:#0e1420;border:1px solid var(--border);font-size:12px;color:var(--muted)}
  .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}

  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin:14px 0;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .section-title{font-size:18px;font-weight:700;margin:6px 0 14px;border-left:4px solid var(--accent);padding-left:10px}
  fieldset{border:none;padding:0;margin:0 0 12px}
  legend{font-weight:600;margin-bottom:8px}
  label.option{display:flex;align-items:flex-start;gap:10px;padding:12px;border:1px solid var(--border);border-radius:12px;background:#0f1520;cursor:pointer}
  label.option:hover{border-color:#2b3a4f}
  input[type=radio],input[type=checkbox]{width:18px;height:18px;margin-top:2px}
  .opt-title{font-weight:600}

  .grid{display:grid;gap:10px}
  @media(min-width:700px){.cols-2{grid-template-columns:1fr 1fr}}
  @media(min-width:900px){.cols-2.extra-gap{gap:24px}.cols-2.with-divider>*:nth-child(2n){position:relative}.cols-2.with-divider>*:nth-child(2n)::before{content:"";position:absolute;left:-12px;top:10px;bottom:10px;width:1px;background:linear-gradient(transparent, #223041 30%, #223041 70%, transparent)}}

  select, textarea, input[type=text]{width:100%;padding:12px;border-radius:10px;border:1px solid var(--border);background:#0f1520;color:var(--text)}
  textarea{min-height:90px;resize:vertical}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;justify-content:flex-start}
  .btn{appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;color:#061016;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 6px 20px rgba(80,180,220,.35)}
  .btn.secondary{background:#101826;color:var(--text);border:1px solid var(--border)}
  .btn.link{background:transparent;border:1px dashed var(--border);color:var(--text)}

  .muted{color:var(--muted)}
  input:focus-visible + .opt-title, label.option:has(input:focus-visible){outline:3px solid var(--focus)}

  details.hint{margin:6px 0 0 28px}
  details.hint summary{cursor:pointer;color:var(--muted);list-style:none}
  details.hint summary::before{content:'▸';display:inline-block;margin-right:6px;transition:transform .15s ease}
  details.hint[open] summary::before{transform:rotate(90deg)}
  .hint-title{font-size:12px;color:#c9d7e1;text-transform:uppercase;letter-spacing:.02em;margin-bottom:4px}
  .hint-line{font-size:13px;color:var(--muted)}

  .hidden{display:none}
  .solo-block{margin-top:22px;padding-top:10px;border-top:1px dashed var(--border)}

  .result{max-height:0;overflow:hidden;transition:max-height .25s ease}
  .result.show{max-height:600px}
  .result pre{white-space:pre-wrap;background:#0e1420;border:1px solid var(--border);border-radius:12px;padding:12px;margin:0}

  .hr-note{margin:14px 0;padding:10px 12px;border:1px dashed var(--border);border-radius:12px;background:#0e1420;color:var(--muted)}
</style>
</head>
<body>
<div class="container">
  <header>
    <img class="brand" id="brandLogo" src="Auctane%20BoxedLockup%20White%20RGB.png" alt="Auctane" />
    <div class="title">ShipStation Platform & Sales Discovery Guide</div>
    <div class="subtitle">Mobile‑friendly guided discovery for field reps · Requirement‑based plan selection (UI path)</div>
    <div class="row"><span class="pill">Updated</span><span class="pill">Discovery + Checklist</span><span class="pill">Copy/Download Summary</span></div>
  </header>

  <!-- Step 1: Choose Platform + Where Print -->
  <section class="card" id="sec-platform">
    <div class="section-title">Step 1 · Choose Platform</div>
    <fieldset>
      <legend>Platform</legend>
      <div class="grid cols-2 extra-gap">
        <label class="option"><input type="radio" name="platform" value="UI" checked><div><div class="opt-title">ShipStation UI</div><div class="muted">Use our web app to manage orders, print labels, and automations.</div></div></label>
        <label class="option"><input type="radio" name="platform" value="API"><div><div class="opt-title">API (in their system)</div><div class="muted">Embed shipping in their platform via API/webhooks.</div></div></label>
      </div>
    </fieldset>

    <fieldset>
      <legend>Where do they want to print their labels?</legend>
      <div class="grid cols-2 extra-gap">
        <label class="option"><input type="radio" name="print_where" value="In our app (ShipStation UI)" checked><div><div class="opt-title">In our app (ShipStation UI)</div><div class="muted">Print from ShipStation with connected printers.</div></div></label>
        <label class="option"><input type="radio" name="print_where" value="In their system (API)"><div><div class="opt-title">In their system (API)</div><div class="muted">Labels generated/printed inside their app/workflow.</div></div></label>
      </div>
      <details class="hint"><summary><span class="hint-title">Examples & Signals</span></summary>
        <div class="hint-line">UI: wants speed to value, minimal dev work, printer stations.</div>
        <div class="hint-line">API: existing platform or WMS/OMS, dev team available.</div>
      </details>
    </fieldset>
  </section>

  <!-- UI Path · Shipments -->
  <section class="card" id="sec-ui-shipments">
    <div class="section-title">UI Path · Shipments</div>
    <fieldset>
      <legend>How many shipments each month?</legend>
      <select name="shipments" id="shipments">
        <option value="">Select range…</option>
        <option value="10">Up to 10</option>
        <option value="50">Up to 50</option>
        <option value="100">Up to 100</option>
        <option value="500">Up to 500</option>
        <option value="1000">Up to 1,000</option>
        <option value="2000">Up to 2,000</option>
        <option value="5000">Up to 5,000</option>
        <option value="5001">5,001+</option>
      </select>
    </fieldset>
  </section>

  <!-- Inventory & Warehouse levels -->
  <section class="card" id="sec-capabilities">
    <div class="section-title">Capabilities</div>
    <div class="grid cols-2 extra-gap with-divider">
      <fieldset>
        <legend>Inventory management level?</legend>
        <label class="option"><input type="radio" name="inv" value="None" checked><div><div class="opt-title">None / External</div><div class="muted">Not using ShipStation for stock.</div></div></label>
        <label class="option"><input type="radio" name="inv" value="Basic"><div><div class="opt-title">Basic</div><div class="muted">Simple stock visibility & allocations.</div></div></label>
        <label class="option"><input type="radio" name="inv" value="Advanced"><div><div class="opt-title">Advanced</div><div class="muted">Kits/Bundles, low‑stock rules, multi‑location sync.</div></div></label>
      </fieldset>

      <fieldset>
        <legend>Warehouse management level?</legend>
        <label class="option"><input type="radio" name="wms" value="Single" checked><div><div class="opt-title">Single location</div><div class="muted">One ship‑from; simple routing.</div></div></label>
        <label class="option"><input type="radio" name="wms" value="Multi"><div><div class="opt-title">Multi‑warehouse</div><div class="muted">Multiple nodes or 3PL locations.</div></div></label>
        <label class="option"><input type="radio" name="wms" value="3PL"><div><div class="opt-title">3PL network</div><div class="muted">Sends orders to third‑party logistics.</div></div></label>
      </fieldset>
    </div>
  </section>

  <!-- Add ons + BYOA -->
  <section class="card" id="sec-addons">
    <div class="section-title">Add ons</div>
    <fieldset>
      <div class="grid cols-2 extra-gap">
        <label class="option"><input type="checkbox" name="addons" value="Scan to Print"><div><div class="opt-title">Scan to Print</div><div class="muted">Barcode‑driven label creation.</div></div></label>
        <label class="option"><input type="checkbox" name="addons" value="Branded Returns"><div><div class="opt-title">Branded Returns</div><div class="muted">Self‑serve returns portal.</div></div></label>
        <label class="option"><input type="checkbox" name="addons" value="Automation Rules"><div><div class="opt-title">Automation Rules</div><div class="muted">At least one rule recommended.</div></div></label>
        <label class="option"><input type="checkbox" name="addons" value="Dropship Manager:149"><div><div class="opt-title">Dropship Manager ($149/mo)</div></div></label>
      </div>
    </fieldset>
    <fieldset class="solo-block">
      <legend>BYOA</legend>
      <label class="option"><input type="checkbox" id="byoa" value="BYOA"><div><div class="opt-title">Bring Your Own Carrier Accounts</div><div class="muted">Merchant uses their negotiated rates.</div></div></label>
    </fieldset>
  </section>

  <!-- DISCOVERY BASICS -->
  <section class="card" id="sec-discovery-basics">
    <div class="section-title">DISCOVERY BASICS</div>
    <div class="hr-note"><strong>Use these questions to better understand a merchant's business objectives.</strong> Not asking all of these questions could lead to gaps in their process and not fully understanding their objectives, thus not creating value.</div>
    <div class="grid cols-2 extra-gap with-divider">
      <fieldset>
        <legend>1. What type of products do you sell?</legend>
        <textarea id="q1"></textarea>
      </fieldset>
      <fieldset>
        <legend>2. Where do you sell your products today?</legend>
        <textarea id="q2"></textarea>
      </fieldset>
      <fieldset>
        <legend>3. Where else do you sell?</legend>
        <textarea id="q3"></textarea>
      </fieldset>
      <fieldset>
        <legend>4. What carriers are you shipping with? What's more important, fast or cheap? (Do you have your own carriers?)</legend>
        <textarea id="q4"></textarea>
      </fieldset>
      <fieldset>
        <legend>5. Do you ship internationally today or just Domestic?</legend>
        <textarea id="q5"></textarea>
      </fieldset>
      <fieldset>
        <legend>6. How are you managing inventory?</legend>
        <textarea id="q6"></textarea>
      </fieldset>
      <fieldset>
        <legend>7. How are you managing returns?</legend>
        <textarea id="q7"></textarea>
      </fieldset>
      <fieldset>
        <legend>8. How many packages are you sending a month?</legend>
        <textarea id="q8"></textarea>
      </fieldset>
      <fieldset>
        <legend>9. How many packages for next month? Any holiday sales coming up?</legend>
        <textarea id="q9"></textarea>
      </fieldset>
      <fieldset>
        <legend>10. When are you looking to get this implemented?</legend>
        <textarea id="q10"></textarea>
      </fieldset>
    </div>
  </section>

  <!-- RECAP BREAK -->
  <section class="card" id="sec-recap-1">
    <div class="hr-note"><strong>RECAP HERE & CONFIRM</strong> – “FROM WHAT I AM HEARING <em>[INSERT RECAP STATEMENT FROM BOXES ABOVE]</em> IS THAT CORRECT?”</div>
    <textarea id="recap1" placeholder="Type your recap to confirm understanding…"></textarea>
  </section>

  <!-- PROCESS DISCOVERY -->
  <section class="card" id="sec-process">
    <div class="section-title">PROCESS DISCOVERY – GET VERY SPECIFIC!</div>
    <div class="muted" style="margin-bottom:10px">Make sure you get very detailed in their shipping process. Have they shipped before? What was that experience like? Was there anything that you wished could be easier or more efficient? What is making this process hard or inefficient? Are there any pains or challenges that we’ve missed?</div>

    <fieldset>
      <legend>11. From cart to door, what does your fulfillment process look like? (Call out at least 1 automation rule* and another feature.)</legend>
      <textarea id="q11"></textarea>
    </fieldset>

    <div class="grid cols-2 extra-gap">
      <fieldset>
        <legend>11a. Pain/Challenge 1</legend>
        <textarea id="q11a"></textarea>
      </fieldset>
      <fieldset>
        <legend>11b. Pain/Challenge 2</legend>
        <textarea id="q11b"></textarea>
      </fieldset>
    </div>
    <fieldset>
      <legend>11c. Pain/Challenge 3</legend>
      <textarea id="q11c"></textarea>
    </fieldset>
  </section>

  <!-- RECAP CHALLENGES VALUE STATEMENT -->
  <section class="card" id="sec-recap-2">
    <fieldset>
      <legend>RECAP CHALLENGES AND GIVE VALUE STATEMENT – “IS THERE ANYTHING ELSE I SHOULD KNOW THAT WOULD MAKE THIS TRANSITION BETTER”?</legend>
      <textarea id="recap2"></textarea>
    </fieldset>
  </section>

  <!-- ONBOARDING CHECKLIST -->
  <section class="card" id="sec-onboarding">
    <div class="section-title">ONBOARDING CHECKLIST</div>
    <fieldset>
      <div class="grid cols-2 extra-gap">
        <label class="option"><input type="checkbox" name="onboard" value="Connect Selling Channel"><div><div class="opt-title">Connect Selling Channel</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Set Ship From Location"><div><div class="opt-title">Set Ship From Location</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Set up Carriers"><div><div class="opt-title">Set up Carriers</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Set up Automation (at least 1)"><div><div class="opt-title">Set up Automation (at least 1)</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Discuss/Explain Inventory"><div><div class="opt-title">Discuss/Explain Inventory</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Discuss/Explain Returns"><div><div class="opt-title">Discuss/Explain Returns</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Set up Subscription w/ ACH or Card"><div><div class="opt-title">Set up Subscription w/ ACH or Card</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Configure a Label / Ensure they know how to print"><div><div class="opt-title">Configure a Label / Ensure they know how to print</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Support Resources"><div><div class="opt-title">Support Resources</div></div></label>
        <label class="option"><input type="checkbox" name="onboard" value="Definitive Next Steps / Follow Up"><div><div class="opt-title">Definitive Next Steps / Follow Up</div></div></label>
      </div>
    </fieldset>
  </section>

  <!-- Actions -->
  <section class="card" id="sec-actions">
    <div class="actions">
      <button class="btn" id="btn-calc">Show Recommendation</button>
      <button class="btn secondary" id="btn-reset" type="button">Reset</button>
      <button class="btn link" id="btn-copy" type="button">Copy Summary</button>
      <button class="btn link" id="btn-download" type="button">Download JSON</button>
    </div>
  </section>

  <!-- Result -->
  <section class="card result" id="sec-result">
    <div class="section-title">Recommendation & Summary</div>
    <pre id="result"></pre>
  </section>
</div>

<script>
(function(){
  var q = sel => document.querySelector(sel);
  var qa = sel => Array.from(document.querySelectorAll(sel));

  var LOGO_DEFAULT = 'Auctane%20BoxedLockup%20White%20RGB.png';
  var LOGO_SS = 'ShipStation%20White.png';
  var LOGO_API = 'Developer%20White.png';

  var PLAN_ORDER = ['Free','Starter','Standard','Premium'];
  var PLAN_INDEX = {Free:0, Starter:1, Standard:2, Premium:3};

  // Simple UI pricing tiers (example; adjust as needed)
  var PRICES = {
    "Free":    {"10": 0.00},
    "Starter": {"50":14.99,"100":29.99,"500":39.99,"1000":79.99,"2000":119.99,"5000":174.99},
    "Standard":{"500":69.99,"1000":99.99,"2000":149.99,"5000":199.99},
    "Premium": {"500":99.99,"1000":149.99,"2000":199.99,"5000":299.99,"5001":"Custom Pricing"}
  };

  // Keep platform + where-print in sync for clarity
  qa('input[name=platform]').forEach(function(r){
    r.addEventListener('change', function(){
      var v = (q('input[name=platform]:checked')||{}).value || 'UI';
      if(v==='UI') q('input[name=print_where][value="In our app (ShipStation UI)"]').checked = true;
      if(v==='API') q('input[name=print_where][value="In their system (API)"]').checked = true;
      // swap logo
      var logo = q('#brandLogo');
      if(v==='UI'){ logo.src = LOGO_SS; logo.alt='ShipStation'; }
      else { logo.src = LOGO_API; logo.alt='Developer'; }
    });
  });

  // Compute allowed plan given core answers (UI only)
  function basePlanFromShipments(val){
    if(!val) return 'Free';
    var n = parseInt(val,10);
    if(n<=10) return 'Free';
    if(n<=100) return 'Starter';
    if(n<=500) return 'Starter';
    if(n<=2000) return 'Standard';
    if(n<=5000) return 'Premium';
    return 'Premium';
  }

  function bumpForCapabilities(plan){
    var inv = (q('input[name=inv]:checked')||{}).value || 'None';
    var wms = (q('input[name=wms]:checked')||{}).value || 'Single';
    var idx = PLAN_INDEX[plan];
    if(inv==='Advanced') idx = Math.max(idx, PLAN_INDEX['Standard']);
    if(wms==='Multi') idx = Math.max(idx, PLAN_INDEX['Standard']);
    if(wms==='3PL') idx = Math.max(idx, PLAN_INDEX['Premium']);
    return PLAN_ORDER[idx];
  }

  function priceText(plan, shipments){
    var tbl = PRICES[plan] || {}; var key = shipments||""; var p = tbl[key];
    if(p==null) return '';
    if(typeof p === 'string') return p;
    return '$'+p.toFixed(2)+'/mo';
  }

  function cleanAddonName(s){ return (s||'').replace(/:.*/, ''); }

  function gatherDiscovery(){
    var ids = ['q1','q2','q3','q4','q5','q6','q7','q8','q9','q10','q11','q11a','q11b','q11c','recap1','recap2'];
    var out = {}; ids.forEach(function(id){ out[id] = (q('#'+id)||{}).value||''; });
    return out;
  }

  function calcRecommendation(){
    var platform = (q('input[name=platform]:checked')||{}).value || 'UI';
    var printWhere = (q('input[name=print_where]:checked')||{}).value || '';

    if(platform!== 'UI'){
      return { platform:'API', print_where: printWhere, recommended: 'Consult Developer Docs', priceText:'', drivers:[], answers: { platform: 'API', print_where: printWhere } , addons:[], totals:null };
    }

    var shipments = q('#shipments').value;
    var base = basePlanFromShipments(shipments);
    var recommended = bumpForCapabilities(base);

    var drivers = [];
    if(recommended!==base) drivers.push('Capabilities require higher tier');
    if(((q('input[name=wms]:checked')||{}).value||'')==='3PL') drivers.push('3PL routing/hand‑off');
    if(((q('input[name=inv]:checked')||{}).value||'')==='Advanced') drivers.push('Advanced inventory');

    var addons = qa('input[name=addons]:checked').map(i=>cleanAddonName(i.value));
    var byoa = q('#byoa').checked;

    var price = priceText(recommended, shipments);
    var totals = null;
    if(price && price!=='Custom Pricing'){
      // add-ons shown but not priced (except Dropship Manager example)
      var addonSum = qa('input[name=addons]:checked').reduce(function(sum,i){ var m=i.value.match(/:(\d+(?:\.\d+)?)/); return sum + (m? parseFloat(m[1]):0); }, 0);
      var baseNum = parseFloat(price.replace(/[^0-9.]/g,'')) || 0;
      totals = { total: baseNum + addonSum, addonSum: addonSum };
    } else if(price==='Custom Pricing'){
      var addonSumC = qa('input[name=addons]:checked').reduce(function(sum,i){ var m=i.value.match(/:(\d+(?:\.\d+)?)/); return sum + (m? parseFloat(m[1]):0); }, 0);
      totals = { total: 'Custom Pricing', addonSum: addonSumC };
    }

    return {
      platform:'UI',
      print_where: printWhere,
      recommended: recommended,
      priceText: price || '',
      drivers: drivers,
      answers: {
        shipments: shipments||'—',
        inventory_level: (q('input[name=inv]:checked')||{}).value||'—',
        warehouse_level: (q('input[name=wms]:checked')||{}).value||'—',
        byoa: byoa? 'Yes':'No'
      },
      addons: addons,
      totals: totals
    };
  }

  function buildSummary(){
    var base = calcRecommendation();
    var lines = [];

    lines.push('Platform: ' + (base.platform==='UI' ? 'ShipStation UI' : 'API (Developer)'));
    lines.push('Where to print labels: ' + (base.print_where||'—'));

    if(base.platform==='UI'){
      lines.push('Recommended Plan: ' + base.recommended + (base.priceText? ' — ' + base.priceText : ''));
      if(base.totals){
        if(base.totals.total === 'Custom Pricing'){ lines.push('Total: Custom Pricing' + (base.totals.addonSum? ' + $'+base.totals.addonSum.toFixed(2)+'/mo add-ons' : '')); }
        else if(typeof base.totals.total === 'number'){ lines.push('Total: $'+base.totals.total.toFixed(2)+'/mo'); }
      }
      lines.push('');
      lines.push('Drivers:');
      if(base.drivers.length){ base.drivers.forEach(function(d){ lines.push('- '+d); }); } else { lines.push('- None'); }
      lines.push('');
      lines.push('Answers:');
      Object.keys(base.answers).forEach(function(k){ lines.push('- '+k+': '+base.answers[k]); });
      if(base.addons.length){ lines.push('- add_ons: ' + base.addons.join(', ')); }
    } else {
      lines.push('Recommendation: Consult Developer integration path.');
    }

    // Discovery blocks (do not affect plan)
    var disc = gatherDiscovery();
    lines.push('');
    lines.push('DISCOVERY BASICS');
    for(var i=1;i<=10;i++){ var key='q'+i; if((disc[key]||'').trim()){ lines.push(i+'. '+disc[key]); } }
    if((disc.recap1||'').trim()){ lines.push('Recap #1: '+disc.recap1); }

    lines.push('');
    lines.push('PROCESS DISCOVERY');
    if((disc.q11||'').trim()) lines.push('11. '+disc.q11);
    if((disc.q11a||'').trim()) lines.push('11a. '+disc.q11a);
    if((disc.q11b||'').trim()) lines.push('11b. '+disc.q11b);
    if((disc.q11c||'').trim()) lines.push('11c. '+disc.q11c);
    if((disc.recap2||'').trim()) lines.push('Recap #2: '+disc.recap2);

    // Onboarding checklist
    var ob = qa('input[name=onboard]:checked').map(i=>i.value);
    lines.push('');
    lines.push('ONBOARDING CHECKLIST:');
    if(ob.length){ ob.forEach(function(v){ lines.push('☑ '+v); }); } else { lines.push('—'); }

    return lines.join('\n');
  }

  q('#btn-calc').addEventListener('click', function(){
    var out = buildSummary();
    q('#result').textContent = out; q('#sec-result').classList.add('show');
    window.scrollTo({ top: q('#sec-result').offsetTop - 12, behavior: 'smooth' });
  });

  q('#btn-reset').addEventListener('click', function(){
    // reset toggles
    q('input[name=platform][value="UI"]').checked = true;
    q('input[name=print_where][value="In our app (ShipStation UI)"]').checked = true;
    q('#shipments').value = '';
    q('input[name=inv][value="None"]').checked = true;
    q('input[name=wms][value="Single"]').checked = true;
    q('#byoa').checked = false;
    qa('input[name=addons]').forEach(i=>i.checked=false);
    qa('input[name=onboard]').forEach(i=>i.checked=false);
    qa('textarea').forEach(t=>t.value='');
    q('#result').textContent=''; q('#sec-result').classList.remove('show');
    var logo = q('#brandLogo'); logo.src=LOGO_SS; logo.alt='ShipStation';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  q('#btn-copy').addEventListener('click', function(){
    var text = buildSummary();
    if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(text).then(function(){ alert('Summary copied to clipboard.'); });
    } else {
      var ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
      alert('Summary copied to clipboard.');
    }
  });

  q('#btn-download').addEventListener('click', function(){
    var payload = {
      meta: { generated_at: new Date().toISOString() },
      summary: buildSummary(),
      selection: calcRecommendation(),
      discovery: gatherDiscovery(),
      onboarding_checked: qa('input[name=onboard]:checked').map(i=>i.value)
    };
    var blob = new Blob([JSON.stringify(payload,null,2)], {type:'application/json'});
    var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'sales_discovery_summary.json'; a.click(); URL.revokeObjectURL(a.href);
  });
})();
</script>
</body>
</html>
